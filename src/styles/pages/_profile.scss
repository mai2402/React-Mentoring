@use '../base/variables' as vars;
@use 'sass:map';


$border: map.get(vars.$colors, border);
$surface: map.get(vars.$colors, surface);
$primary: map.get(vars.$colors, primary);
$neutral-1: map.get(vars.$colors, neutral-1);
$neutral-9: map.get(vars.$colors, neutral-9);

.profile {
  /* LAYOUT */
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: map.get(vars.$space, lg);
  min-height: 100vh;
  width: 90%;
  margin: 0 auto;
  background: $neutral-1;

  /* SIDEBAR */
  &__sidebar {
    position: sticky;
    top: map.get(vars.$space, md);
    align-self: start;
    background: lighten($neutral-1, 3%);
    border-radius: 12px;
    padding: map.get(vars.$space, md);
    box-shadow: 0 6px 20px rgba(0,0,0,0.05);
    display: grid;
    gap: map.get(vars.$space, md);
  }

 
  &__avatar {
    margin: 0 auto;
    width: 10rem;
    height: 10rem;
    position: relative;
    border-radius: 50%;
    border: 0.0625rem solid $neutral-1; // 1px
    display: grid;
    place-items: center;

    /* ðŸ”¹ size modifiers */
    &--sm { width: 4.5rem;  height: 4.5rem;  }
    &--md { width: 7.5rem; height: 7.5rem; }
    &--lg { width: 10rem; height: 10rem; }
    &--xl { width: 12.5rem; height: 12.5rem; }

    img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      border-radius: 50%;
    
    }

    &.is-uploading {
      img { filter: saturate(.85) opacity(.9); }
      .camera-btn { opacity: .6; pointer-events: none; }
    }

    /* Google-like camera pill */
    .camera-btn {
      z-index: 10000;
      position: absolute;
      right: map.get(vars.$space, sm);  
      bottom: map.get(vars.$space, sm);  
      width:3rem;
      height:3rem;
      border-radius: 9999px;
      display: grid;
      place-items: center;
      background: rgba(0, 0, 0, .55);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, .7);
      cursor: pointer;
      transition: transform .15s ease;

      svg { pointer-events: none; }

      &:focus-visible {
        outline: 2px solid $primary;
        outline-offset: 2px;
      }
      &:disabled { cursor: not-allowed; }
    }

    &:hover .camera-btn { transform: scale(1.05); }
  }


  &__avatar--fallback {
       /* sits underneath the <img> automatically */
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: grid;
    place-items: center;
    background: black;
    color: white;
    font-weight: 700;

    /* scale text with avatar size: 0.38 of the box */
    /* 1rem here equals the avatar box; em keeps it relative */
    font-size: clamp(1rem, 0.38 * var(--avatar-size, 10rem), 4rem);
    text-transform: uppercase;
    user-select: none;
  }

  .badge {
    justify-self: center;
    padding: .15rem .5rem; border-radius: 999px; font-size: .75rem;
    &--active { background: #e6ffed; color: #0f7a39; }
    &--inactive { background: #fee2e2; color: #991b1b; }
    &--pending { background: #fff7ed; color: #9a3412; }
  }

  /* QUICK ACTIONS + LINKS */
  &__quick { display: grid; gap: map.get(vars.$space, sm); }
  .btn {
    border: 1px solid lighten($neutral-9, 60%);
    border-radius: 10px;
    padding: .5rem .75rem; background: #fff; cursor: pointer;
    &--primary { background: $primary; color: #fff; border-color: $primary; }
    &--ghost   { background: #fff; color: $neutral-9; }
  }


  
  &__shortcuts, &__links {
    h4 { margin: 0 0 map.get(vars.$space, xs); font-family: vars.$font-stack; }
    ul { list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem; }
    a { color: $primary; text-decoration: none; }
  }

  /* MAIN CARD */
  &__main {
    background: lighten($neutral-1, 3%);
    border-radius: 12px;
    padding: map.get(vars.$space, lg);
    box-shadow: 0 6px 20px rgba(0,0,0,0.05);
    display: grid;
    gap: map.get(vars.$space, md);
  }

  /* HEADER */
  &__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: map.get(vars.$space, md);
  }
  &__title { display: grid; gap: map.get(vars.$space, xs); }
  &__name {
    font-family: vars.$font-stack;
    font-size: 1.5rem;
    color: $primary;
    margin: 0;
    display: inline-flex; align-items: center; gap: .5rem;
  }
  .check { width: 16px; height: 16px; border-radius: 50%; background: #22c55e; display: inline-block; }

  &__meta {
    display: flex; flex-wrap: wrap; gap: .5rem; flex-direction: column;
  }
  .chip {
    background: lighten($neutral-1, 8%);
    color: $neutral-9;
    border-radius: 999px;
    padding: .15rem .5rem;
    font-size: .85rem;
    &--muted { background: lighten($neutral-1, 12%); color: lighten($neutral-9, 20%); }
  }

  /* KPIs (optional) */
  &__kpis {
    display: grid;
    grid-template-columns: repeat( auto-fit, minmax(160px, 1fr) );
    gap: map.get(vars.$space, md);
    &-card {
      background: #fff; border-radius: 12px; padding: map.get(vars.$space, md);
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
      display: grid; gap: .25rem;
      strong { font-size: 1.25rem; }
      span { color: lighten($neutral-9, 20%); font-size: .9rem; }
    }
  }

  /* TABS */
  .tabs {
    border-bottom: 1px solid lighten($neutral-9, 70%);
    &__tab {
      padding: .5rem .75rem;
      margin-right: .25rem;
      border: none; background: transparent; cursor: pointer;
      font-family: vars.$font-stack;
      color: $neutral-9;
      &.is-active { border-bottom: 2px solid $primary; font-weight: 600; color: $primary; }
    }
  }
  .tabs__panel { padding-top: map.get(vars.$space, md); }

  /* CONTENT SECTIONS */
  &__section {
    display: grid; gap: map.get(vars.$space, xs);
    h3 { margin: 0; font-family: vars.$font-stack; }
  }
  &__bio {
    font-family: vars.$font-stack;
    font-size: 1rem;
    color: $neutral-9;
    text-align: left;
    max-width: 65ch;
  }

  /* ORIGINAL BLOCKS (kept for compatibility) */
  &__card { /* deprecated: replaced by __main; keep to avoid breaking old markup */
    width: 100%;
    margin: auto;
    padding: map.get(vars.$space, lg);
    background: lighten($neutral-1, 3%);
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.05);
    display: flex; flex-direction: column; align-items: center;
  }
  &__text { align-items: center; display: flex; flex-direction: column; }
  &__email {
    font-family: vars.$font-stack;
    font-size: 1.1rem;
    margin-bottom: map.get(vars.$space, sm);
    color: lighten($neutral-9, 30%);
  }

  /* SKELETONS */
  &--loading * { animation: profile-pulse 1.4s ease-in-out infinite; }
  .skeleton {
    background: lighten($neutral-1, 10%);
    border-radius: 8px;
    &--avatar { width: 12rem; height: 12rem; margin: 0 auto; }
    &--title { height: 24px; width: 40%; }
    &--line { height: 14px; width: 100%; }
    &--btn  { height: 36px; width: 100%; }
  }
  @keyframes profile-pulse { 0%,100%{opacity:.6} 50%{opacity:1} }

  /* RESPONSIVE */
  @media (max-width: 900px) {
    grid-template-columns: 1fr;
    &__sidebar { position: static; }
    &__header { flex-direction: column; align-items: flex-start; }
  }
}


